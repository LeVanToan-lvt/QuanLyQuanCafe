[ApiController]
[Route("api/[controller]")]
public class OrdersController : ControllerBase
{
    [HttpPost]
    public IActionResult CreateOrder([FromBody] CreateOrderRequest request)
    {
        if (request.ShippingInfo == null || string.IsNullOrEmpty(request.ShippingInfo.FullName))
        {
            return BadRequest("Tên người nhận không được để trống");
        }

        var calculatedTotal = request.Items?.Sum(i => i.Price * i.Quantity) ?? 0;
        if (calculatedTotal != request.TotalAmount)
        {
            return BadRequest("Tổng tiền không khớp");
        }

        var response = new CreateOrderResponse
        {
            OrderCode = "CF" + DateTimeOffset.Now.ToUnixTimeMilliseconds(),
            Status = "SUCCESS",
            Message = "Đặt hàng thành công"
        };

        return Ok(response);
    }
}
